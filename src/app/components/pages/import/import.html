<div class="background-container bg-white flex items-center justify-center overflow-hidden">
  <div class="container flex flex-col justify-center items-center p-8 max-w-4xl w-full">
    <h1 class="text-4xl font-light mb-8 text-center">Import Your Anime List</h1>

    <mat-card class="upload-card w-full mb-8">
      <mat-card-content>
        <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-12 text-center transition-all"
             [class.border-indigo-500]="isDragging"
             [class.bg-indigo-50]="isDragging"
             (dragover)="onDragOver($event)"
             (dragleave)="onDragLeave($event)"
             (drop)="onDrop($event)">
          <mat-icon class="text-6xl text-gray-400 mb-4">cloud_upload</mat-icon>
          <p class="text-gray-600 mb-2">Drag and drop your MAL export JSON file here</p>
          <p class="text-gray-400 mb-4">or</p>
          <input type="file"
                 #fileInput
                 accept=".json"
                 (change)="onFileSelected($event)"
                 hidden>
          <button mat-raised-button color="primary" (click)="fileInput.click()">
            <mat-icon class="mr-2">folder_open</mat-icon>
            Choose File
          </button>
        </div>

        <div class="instructions mt-8 pt-8 border-t border-gray-200">
          <h3 class="text-lg font-medium mb-4">How to export from MyAnimeList:</h3>
          <ol class="list-decimal pl-6 space-y-2 text-gray-600">
            <li>Go to your MAL profile</li>
            <li>Click "Export" in the anime list section</li>
            <li>Download the JSON file</li>
            <li>Upload it here</li>
          </ol>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="preview-card w-full" *ngIf="animeList.length > 0">
      <mat-card-header>
        <mat-card-title>Loaded {{ animeList.length }} Anime</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="anime-preview grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4 mb-4 max-h-72 overflow-y-auto">
          <div class="anime-item text-center" *ngFor="let anime of previewAnime">
            <img [src]="anime.main_picture.medium" [alt]="anime.title" class="w-full h-48 object-cover rounded mb-2">
            <span class="text-sm line-clamp-2">{{ anime.title }}</span>
          </div>
        </div>
        <mat-progress-bar mode="determinate"
                         [value]="(animeList.length / totalExpected) * 100">
        </mat-progress-bar>
      </mat-card-content>
      <mat-card-actions class="justify-end gap-2">
        <button mat-button (click)="clearData()">Clear</button>
        <button mat-raised-button color="primary" (click)="startRanking()">
          <mat-icon class="mr-2">play_arrow</mat-icon>
          Start Ranking
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
