<div class="background-container bg-white flex items-center justify-center overflow-hidden">
  <div class="container flex flex-col justify-center items-center p-4 max-w-6xl w-full" *ngIf="!state.isComplete && state.currentPair">
    <div class="progress-section w-full mb-8 max-w-2xl">
      <div class="flex justify-between mb-2 font-medium">
        <span>Progress: {{ state.comparisonsDone }} / {{ state.totalComparisons }}</span>
        <span class="text-indigo-600">{{ progressPercentage }}%</span>
      </div>
      <mat-progress-bar mode="determinate" [value]="progressPercentage"></mat-progress-bar>
    </div>

    <h2 class="text-2xl font-light mb-8 text-center">Which anime do you prefer?</h2>

    <div class="comparison-cards grid grid-cols-1 md:grid-cols-3 gap-8 items-center w-full mb-8">
      <mat-card class="anime-card cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl" (click)="selectWinner(0)">
        <img mat-card-image
             [src]="state.currentPair[0].main_picture.medium"
             [alt]="state.currentPair[0].title"
             class="w-full h-96 object-cover">
        <mat-card-content class="p-4">
          <h3 class="text-lg font-medium line-clamp-2 min-h-14">{{ state.currentPair[0].title }}</h3>
        </mat-card-content>
        <mat-card-actions class="justify-center p-4">
          <button mat-raised-button color="primary" class="w-full">
            <mat-icon class="mr-2">check_circle</mat-icon>
            Select
          </button>
        </mat-card-actions>
      </mat-card>

      <div class="vs-divider text-4xl font-bold text-gray-400 text-center">
        <span class="inline-block p-4 rounded-full bg-gray-100">VS</span>
      </div>

      <mat-card class="anime-card cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl" (click)="selectWinner(1)">
        <img mat-card-image
             [src]="state.currentPair[1].main_picture.medium"
             [alt]="state.currentPair[1].title"
             class="w-full h-96 object-cover">
        <mat-card-content class="p-4">
          <h3 class="text-lg font-medium line-clamp-2 min-h-14">{{ state.currentPair[1].title }}</h3>
        </mat-card-content>
        <mat-card-actions class="justify-center p-4">
          <button mat-raised-button color="primary" class="w-full">
            <mat-icon class="mr-2">check_circle</mat-icon>
            Select
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <div class="actions flex justify-center gap-4">
      <button mat-button (click)="skip()">
        <mat-icon class="mr-2">skip_next</mat-icon>
        Skip
      </button>
      <button mat-button color="warn" (click)="abort()">
        <mat-icon class="mr-2">stop</mat-icon>
        Stop
      </button>
    </div>
  </div>

  <div class="complete-container text-center p-16" *ngIf="state.isComplete">
    <mat-icon class="text-8xl text-indigo-600 mb-4">emoji_events</mat-icon>
    <h2 class="text-3xl font-light mb-4">Ranking Complete!</h2>
    <p class="text-gray-600 mb-8">You've completed {{ state.comparisonsDone }} comparisons.</p>
    <button mat-raised-button color="primary" (click)="viewResults()">
      <mat-icon class="mr-2">visibility</mat-icon>
      View Results
    </button>
  </div>

  <div class="empty-container text-center p-16" *ngIf="!state.currentPair && !state.isComplete">
    <mat-icon class="text-8xl text-gray-400 mb-4">error_outline</mat-icon>
    <h2 class="text-3xl font-light mb-4">No Anime Loaded</h2>
    <p class="text-gray-600 mb-8">Please import your anime list first.</p>
    <button mat-raised-button color="primary" routerLink="/import">
      <mat-icon class="mr-2">upload</mat-icon>
      Go to Import
    </button>
  </div>
</div>
